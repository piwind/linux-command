<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <meta name="description" content="strace:跟踪系统调用和信号 - 最专业的Linux命令大全，内容包含Linux命令手册、详解、学习，值得收藏的Linux命令速查手册。">
    <meta name="keywords" content="Linux,Command,命令大全,Linux命令手册,strace,跟踪系统调用和信号">
    <title>strace 命令，Linux strace 命令详解：跟踪系统调用和信号 -  Linux 命令搜索引擎</title>
    <link rel="shortcut icon" href="../img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="../css/index.css?v=1750599371405">
    <script src="../js/dark-mode.min.js"></script>
    <script type="module" src="../js/github-corners.js"></script>
</head>
<body>
<dark-mode permanent dark="Dark" light="Light" style="position: fixed;left: 10px;top: 8px; z-index: 999;"></dark-mode>
<github-corners target="__blank" z-index="999" position="fixed" href="https://github.com/piwind/linux-command"></github-corners>
<div class="header header_list">
  <div class="header_inner">
      <div class="logo">
          <a href="../index.html">
            <img src="../img/logo.svg" alt="Linux Command Logo">
          </a>
      </div>
      <div class="search">
          <ul class="search-list" id="result">
            <!-- <li><a href="#"><strong>find</strong> - 指定目录下查找文件。</a></li> -->
          </ul>
          <input type="text" class="query" id="query" autocomplete="off" autofocus="autofocus" placeholder="Linux 命令搜索"/>
          <div class="enter-input">
              <input type="hidden" id="current_path" value="/c/strace.html">
              <button id="search_btn">搜索</button>
          </div>
      </div>
  </div>
</div>
<script type="text/javascript" src="../js/copy-to-clipboard.js"></script>

<div class="markdown-body">

<span class="edit_btn">
<a target="_blank" href="https://forum.piwind.com/">纠正错误</a> 
<span class="split"></span>
<a target="_blank" href="https://forum.piwind.com/">添加实例</a>
</span>


<dark-mode style="position: fixed; top: 8px; left: 10px; z-index: 999;;display: none;" dark="Dark" light="Light"></dark-mode><script>const t=document;const e="_dark_mode_theme_";const s="permanent";const o="colorschemechange";const i="permanentcolorscheme";const h="light";const r="dark";const n=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){const t=this.getAttribute(e);return t===null?"":t},set(t){this.setAttribute(e,t)}})};const c=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){return this.hasAttribute(e)},set(t){if(t){this.setAttribute(e,"")}else{this.removeAttribute(e)}}})};class a extends HTMLElement{static get observedAttributes(){return["mode",h,r,s]}LOCAL_NANE=e;constructor(){super();this.t()}connectedCallback(){n(this,"mode");n(this,r);n(this,h);c(this,s);const a=localStorage.getItem(e);if(a&&[h,r].includes(a)){this.mode=a;this.permanent=true}if(this.permanent&&!a){localStorage.setItem(e,this.mode)}const l=[h,r].includes(a);if(this.permanent&&a){this.o()}else{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){this.mode=r;this.o()}if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches){this.mode=h;this.o()}}if(!this.permanent&&!l){window.matchMedia("(prefers-color-scheme: light)").onchange=t=>{this.mode=t.matches?h:r;this.o()};window.matchMedia("(prefers-color-scheme: dark)").onchange=t=>{this.mode=t.matches?r:h;this.o()}}const d=new MutationObserver(((s,h)=>{this.mode=t.documentElement.dataset.colorMode;if(this.permanent&&l){localStorage.setItem(e,this.mode);this.i(i,{permanent:this.permanent})}this.h();this.i(o,{colorScheme:this.mode})}));d.observe(t.documentElement,{attributes:true});this.i(o,{colorScheme:this.mode});this.h()}attributeChangedCallback(t,s,o){if(t==="mode"&&s!==o&&[h,r].includes(o)){const t=localStorage.getItem(e);if(this.mode===t){this.mode=o;this.h();this.o()}else if(this.mode&&this.mode!==t){this.h();this.o()}}else if((t===h||t===r)&&s!==o){this.h()}if(t==="permanent"&&typeof this.permanent==="boolean"){this.permanent?localStorage.setItem(e,this.mode):localStorage.removeItem(e)}}o(){t.documentElement.setAttribute("data-color-mode",this.mode)}h(){this.icon.textContent=this.mode===h?"🌒":"🌞";this.text.textContent=this.mode===h?this.getAttribute(r):this.getAttribute(h)}t(){var s=this.attachShadow({mode:"open"});this.label=t.createElement("span");this.label.setAttribute("class","wrapper");this.label.onclick=()=>{this.mode=this.mode===h?r:h;if(this.permanent){localStorage.setItem(e,this.mode)}this.o();this.h()};s.appendChild(this.label);this.icon=t.createElement("span");this.label.appendChild(this.icon);this.text=t.createElement("span");this.label.appendChild(this.text);const o=`
[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-theme-bg: #0d1117;
  --color-theme-text: #c9d1d9;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}

[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-theme-bg: #fff;
  --color-theme-text: #24292f;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}`;const i="_dark_mode_style_";const n=t.getElementById(i);if(!n){var c=t.createElement("style");c.id=i;c.textContent=o;t.head.appendChild(c)}var a=t.createElement("style");a.textContent=`
    .wrapper { cursor: pointer; user-select: none; position: relative; }
    .wrapper > span + span { margin-left: .4rem; }
    `;s.appendChild(a)}i(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:true,composed:true,detail:e}))}}customElements.define("dark-mode",a);</script><script>const __TEMPLATE__ = document.createElement('template');
__TEMPLATE__.innerHTML = `
<style>

markdown-style h1:hover a.anchor .octicon-link:before,
markdown-style h2:hover a.anchor .octicon-link:before,
markdown-style h3:hover a.anchor .octicon-link:before,
markdown-style h4:hover a.anchor .octicon-link:before,
markdown-style h5:hover a.anchor .octicon-link:before,
markdown-style h6:hover a.anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
[data-color-mode*='light'], [data-color-mode*='light'] body, markdown-style[theme*='light'] { --color-prettylights-syntax-comment: #6e7781; --color-prettylights-syntax-constant: #0550ae; --color-prettylights-syntax-entity: #8250df; --color-prettylights-syntax-storage-modifier-import: #24292f; --color-prettylights-syntax-entity-tag: #116329; --color-prettylights-syntax-keyword: #cf222e; --color-prettylights-syntax-string: #0a3069; --color-prettylights-syntax-variable: #953800; --color-prettylights-syntax-brackethighlighter-unmatched: #82071e; --color-prettylights-syntax-invalid-illegal-text: #f6f8fa; --color-prettylights-syntax-invalid-illegal-bg: #82071e; --color-prettylights-syntax-carriage-return-text: #f6f8fa; --color-prettylights-syntax-carriage-return-bg: #cf222e; --color-prettylights-syntax-string-regexp: #116329; --color-prettylights-syntax-markup-list: #3b2300; --color-prettylights-syntax-markup-heading: #0550ae; --color-prettylights-syntax-markup-italic: #24292f; --color-prettylights-syntax-markup-bold: #24292f; --color-prettylights-syntax-markup-deleted-text: #82071e; --color-prettylights-syntax-markup-deleted-bg: #FFEBE9; --color-prettylights-syntax-markup-inserted-text: #116329; --color-prettylights-syntax-markup-inserted-bg: #dafbe1; --color-prettylights-syntax-markup-changed-text: #953800; --color-prettylights-syntax-markup-changed-bg: #ffd8b5; --color-prettylights-syntax-markup-ignored-text: #eaeef2; --color-prettylights-syntax-markup-ignored-bg: #0550ae; --color-prettylights-syntax-meta-diff-range: #8250df; --color-prettylights-syntax-brackethighlighter-angle: #57606a; --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f; --color-prettylights-syntax-constant-other-reference-link: #0a3069; --color-fg-default: #24292f; --color-fg-muted: #57606a; --color-fg-subtle: #6e7781; --color-canvas-default: #ffffff; --color-canvas-subtle: #f6f8fa; --color-border-default: #d0d7de; --color-border-muted: hsla(210,18%,87%,1); --color-neutral-muted: rgba(175,184,193,0.2); --color-accent-fg: #0969da; --color-accent-emphasis: #0969da; --color-attention-subtle: #fff8c5; --color-danger-fg: #cf222e; } [data-color-mode*='dark'], [data-color-mode*='dark'] body, markdown-style[theme*='dark'] { --color-prettylights-syntax-comment: #8b949e; --color-prettylights-syntax-constant: #79c0ff; --color-prettylights-syntax-entity: #d2a8ff; --color-prettylights-syntax-storage-modifier-import: #c9d1d9; --color-prettylights-syntax-entity-tag: #7ee787; --color-prettylights-syntax-keyword: #ff7b72; --color-prettylights-syntax-string: #a5d6ff; --color-prettylights-syntax-variable: #ffa657; --color-prettylights-syntax-brackethighlighter-unmatched: #f85149; --color-prettylights-syntax-invalid-illegal-text: #f0f6fc; --color-prettylights-syntax-invalid-illegal-bg: #8e1519; --color-prettylights-syntax-carriage-return-text: #f0f6fc; --color-prettylights-syntax-carriage-return-bg: #b62324; --color-prettylights-syntax-string-regexp: #7ee787; --color-prettylights-syntax-markup-list: #f2cc60; --color-prettylights-syntax-markup-heading: #1f6feb; --color-prettylights-syntax-markup-italic: #c9d1d9; --color-prettylights-syntax-markup-bold: #c9d1d9; --color-prettylights-syntax-markup-deleted-text: #ffdcd7; --color-prettylights-syntax-markup-deleted-bg: #67060c; --color-prettylights-syntax-markup-inserted-text: #aff5b4; --color-prettylights-syntax-markup-inserted-bg: #033a16; --color-prettylights-syntax-markup-changed-text: #ffdfb6; --color-prettylights-syntax-markup-changed-bg: #5a1e02; --color-prettylights-syntax-markup-ignored-text: #c9d1d9; --color-prettylights-syntax-markup-ignored-bg: #1158c7; --color-prettylights-syntax-meta-diff-range: #d2a8ff; --color-prettylights-syntax-brackethighlighter-angle: #8b949e; --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58; --color-prettylights-syntax-constant-other-reference-link: #a5d6ff; --color-fg-default: #c9d1d9; --color-fg-muted: #8b949e; --color-fg-subtle: #484f58; --color-canvas-default: #0d1117; --color-canvas-subtle: #161b22; --color-border-default: #30363d; --color-border-muted: #21262d; --color-neutral-muted: rgba(110,118,129,0.4); --color-accent-fg: #58a6ff; --color-accent-emphasis: #1f6feb; --color-attention-subtle: rgba(187,128,9,0.15); --color-danger-fg: #f85149; } markdown-style { display: block; -webkit-text-size-adjust: 100%; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"; font-size: 16px; line-height: 1.5; word-wrap: break-word; color: var(--color-fg-default); background-color: var(--color-canvas-default); } markdown-style details, markdown-style figcaption, markdown-style figure { display: block; } markdown-style summary { display: list-item; } markdown-style [hidden] { display: none !important; } markdown-style a { background-color: transparent; color: var(--color-accent-fg); text-decoration: none; } markdown-style a:active, markdown-style a:hover { outline-width: 0; } markdown-style abbr[title] { border-bottom: none; text-decoration: underline dotted; } markdown-style b, markdown-style strong { font-weight: 600; } markdown-style dfn { font-style: italic; } markdown-style h1 { margin: .67em 0; font-weight: 600; padding-bottom: .3em; font-size: 2em; border-bottom: 1px solid var(--color-border-muted); } markdown-style mark { background-color: var(--color-attention-subtle); color: var(--color-text-primary); } markdown-style small { font-size: 90%; } markdown-style sub, markdown-style sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } markdown-style sub { bottom: -0.25em; } markdown-style sup { top: -0.5em; } markdown-style img { border-style: none; max-width: 100%; box-sizing: content-box; background-color: var(--color-canvas-default); } markdown-style code, markdown-style kbd, markdown-style pre, markdown-style samp { font-family: monospace,monospace; font-size: 1em; } markdown-style figure { margin: 1em 40px; } markdown-style hr { box-sizing: content-box; overflow: hidden; background: transparent; border-bottom: 1px solid var(--color-border-muted); height: .25em; padding: 0; margin: 24px 0; background-color: var(--color-border-default); border: 0; } markdown-style input { font: inherit; margin: 0; overflow: visible; font-family: inherit; font-size: inherit; line-height: inherit; } markdown-style [type=button], markdown-style [type=reset], markdown-style [type=submit] { -webkit-appearance: button; } markdown-style [type=button]::-moz-focus-inner, markdown-style [type=reset]::-moz-focus-inner, markdown-style [type=submit]::-moz-focus-inner { border-style: none; padding: 0; } markdown-style [type=button]:-moz-focusring, markdown-style [type=reset]:-moz-focusring, markdown-style [type=submit]:-moz-focusring { outline: 1px dotted ButtonText; } markdown-style [type=checkbox], markdown-style [type=radio] { box-sizing: border-box; padding: 0; } markdown-style [type=number]::-webkit-inner-spin-button, markdown-style [type=number]::-webkit-outer-spin-button { height: auto; } markdown-style [type=search] { -webkit-appearance: textfield; outline-offset: -2px; } markdown-style [type=search]::-webkit-search-cancel-button, markdown-style [type=search]::-webkit-search-decoration { -webkit-appearance: none; } markdown-style ::-webkit-input-placeholder { color: inherit; opacity: .54; } markdown-style ::-webkit-file-upload-button { -webkit-appearance: button; font: inherit; } markdown-style a:hover { text-decoration: underline; } markdown-style hr::before { display: table; content: ""; } markdown-style hr::after { display: table; clear: both; content: ""; } markdown-style table { border-spacing: 0; border-collapse: collapse; display: block; width: max-content; max-width: 100%; overflow: auto; } markdown-style td, markdown-style th { padding: 0; } markdown-style details summary { cursor: pointer; } markdown-style details:not([open])>*:not(summary) { display: none !important; } markdown-style kbd { display: inline-block; padding: 3px 5px; font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; line-height: 10px; color: var(--color-fg-default); vertical-align: middle; background-color: var(--color-canvas-subtle); border: solid 1px var(--color-neutral-muted); border-bottom-color: var(--color-neutral-muted); border-radius: 6px; box-shadow: inset 0 -1px 0 var(--color-neutral-muted); } markdown-style h1, markdown-style h2, markdown-style h3, markdown-style h4, markdown-style h5, markdown-style h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; } markdown-style h2 { font-weight: 600; padding-bottom: .3em; font-size: 1.5em; border-bottom: 1px solid var(--color-border-muted); } markdown-style h3 { font-weight: 600; font-size: 1.25em; } markdown-style h4 { font-weight: 600; font-size: 1em; } markdown-style h5 { font-weight: 600; font-size: .875em; } markdown-style h6 { font-weight: 600; font-size: .85em; color: var(--color-fg-muted); } markdown-style p { margin-top: 0; margin-bottom: 10px; } markdown-style blockquote { margin: 0; padding: 0 1em; color: var(--color-fg-muted); border-left: .25em solid var(--color-border-default); } markdown-style ul, markdown-style ol { margin-top: 0; margin-bottom: 0; padding-left: 2em; } markdown-style ol ol, markdown-style ul ol { list-style-type: lower-roman; } markdown-style ul ul ol, markdown-style ul ol ol, markdown-style ol ul ol, markdown-style ol ol ol { list-style-type: lower-alpha; } markdown-style dd { margin-left: 0; } markdown-style tt, markdown-style code { font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; } markdown-style pre { margin-top: 0; margin-bottom: 0; font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; word-wrap: normal; } markdown-style .octicon { display: inline-block; overflow: visible !important; vertical-align: text-bottom; fill: currentColor; } markdown-style ::placeholder { color: var(--color-fg-subtle); opacity: 1; } markdown-style input::-webkit-outer-spin-button, markdown-style input::-webkit-inner-spin-button { margin: 0; -webkit-appearance: none; appearance: none; }
markdown-style .token.comment, markdown-style .token.prolog, markdown-style .token.doctype, markdown-style .token.cdata { color: var(--color-prettylights-syntax-comment); } markdown-style .token.namespace { opacity: 0.7; } markdown-style .token.tag, markdown-style .token.selector, markdown-style .token.constant, markdown-style .token.symbol, markdown-style .token.deleted { color: var(--color-prettylights-syntax-entity-tag); } markdown-style .token.maybe-class-name { color: var(--color-prettylights-syntax-variable); } markdown-style .token.property-access, markdown-style .token.operator, markdown-style .token.boolean, markdown-style .token.number, markdown-style .token.selector markdown-style .token.class, markdown-style .token.attr-name, markdown-style .token.string, markdown-style .token.char, markdown-style .token.builtin { color: var(--color-prettylights-syntax-constant); } markdown-style .token.deleted { color: var(--color-prettylights-syntax-markup-deleted-text); } markdown-style .token.property { color: var(--color-prettylights-syntax-constant); } markdown-style .token.punctuation { color: var(--color-prettylights-syntax-markup-bold); } markdown-style .token.function { color: var(--color-prettylights-syntax-entity); } markdown-style .code-line .token.deleted { background-color: var(--color-prettylights-syntax-markup-deleted-bg); } markdown-style .token.inserted { color: var(--color-prettylights-syntax-markup-inserted-text); } markdown-style .code-line .token.inserted { background-color: var(--color-prettylights-syntax-markup-inserted-bg); } markdown-style .token.variable { color: var(--color-prettylights-syntax-constant); } markdown-style .token.entity, markdown-style .token.url, .language-css markdown-style .token.string, .style markdown-style .token.string { color: var(--color-prettylights-syntax-string); } markdown-style .token.color, markdown-style .token.atrule, markdown-style .token.attr-value, markdown-style .token.function, markdown-style .token.class-name { color: var(--color-prettylights-syntax-string); } markdown-style .token.rule, markdown-style .token.regex, markdown-style .token.important, markdown-style .token.keyword { color: var(--color-prettylights-syntax-keyword); } markdown-style .token.coord { color: var(--color-prettylights-syntax-meta-diff-range); } markdown-style .token.important, markdown-style .token.bold { font-weight: bold; } markdown-style .token.italic { font-style: italic; } markdown-style .token.entity { cursor: help; }
markdown-style [data-catalyst] { display: block; } markdown-style g-emoji { font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; font-size: 1em; font-style: normal !important; font-weight: 400; line-height: 1; vertical-align: -0.075em; } markdown-style g-emoji img { width: 1em; height: 1em; } markdown-style::before { display: table; content: ""; } markdown-style::after { display: table; clear: both; content: ""; } markdown-style>*:first-child { margin-top: 0 !important; } markdown-style>*:last-child { margin-bottom: 0 !important; } markdown-style a:not([href]) { color: inherit; text-decoration: none; } markdown-style .absent { color: var(--color-danger-fg); } markdown-style a.anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1; } markdown-style a.anchor:focus { outline: none; } markdown-style p, markdown-style blockquote, markdown-style ul, markdown-style ol, markdown-style dl, markdown-style table, markdown-style pre, markdown-style details { margin-top: 0; margin-bottom: 16px; } markdown-style blockquote>:first-child { margin-top: 0; } markdown-style blockquote>:last-child { margin-bottom: 0; } markdown-style sup>a::before { content: "["; } markdown-style sup>a::after { content: "]"; }
markdown-style .octicon-video { border: 1px solid #d0d7de !important; border-radius: 6px !important; display: block; } markdown-style .octicon-video summary { border-bottom: 1px solid #d0d7de !important; padding: 8px 16px !important; cursor: pointer; } markdown-style .octicon-video > video { display: block !important; max-width: 100% !important; padding: 2px; box-sizing: border-box; border-bottom-right-radius: 6px !important; border-bottom-left-radius: 6px !important; } markdown-style details.octicon-video:not([open])>*:not(summary) { display: none !important; } markdown-style details.octicon-video:not([open]) > summary { border-bottom: 0 !important; } markdown-style h1 .octicon-link, markdown-style h2 .octicon-link, markdown-style h3 .octicon-link, markdown-style h4 .octicon-link, markdown-style h5 .octicon-link, markdown-style h6 .octicon-link { color: var(--color-fg-default); vertical-align: middle; visibility: hidden; } markdown-style h1:hover .anchor, markdown-style h2:hover .anchor, markdown-style h3:hover .anchor, markdown-style h4:hover .anchor, markdown-style h5:hover .anchor, markdown-style h6:hover .anchor { text-decoration: none; } markdown-style h1:hover .anchor .octicon-link, markdown-style h2:hover .anchor .octicon-link, markdown-style h3:hover .anchor .octicon-link, markdown-style h4:hover .anchor .octicon-link, markdown-style h5:hover .anchor .octicon-link, markdown-style h6:hover .anchor .octicon-link { visibility: visible; } markdown-style h1 tt, markdown-style h1 code, markdown-style h2 tt, markdown-style h2 code, markdown-style h3 tt, markdown-style h3 code, markdown-style h4 tt, markdown-style h4 code, markdown-style h5 tt, markdown-style h5 code, markdown-style h6 tt, markdown-style h6 code { padding: 0 .2em; font-size: inherit; } markdown-style ul.no-list, markdown-style ol.no-list { padding: 0; list-style-type: none; } markdown-style ol[type="1"] { list-style-type: decimal; } markdown-style ol[type=a] { list-style-type: lower-alpha; } markdown-style ol[type=i] { list-style-type: lower-roman; } markdown-style div>ol:not([type]) { list-style-type: decimal; } markdown-style ul ul, markdown-style ul ol, markdown-style ol ol, markdown-style ol ul { margin-top: 0; margin-bottom: 0; } markdown-style li>p { margin-top: 16px; } markdown-style li+li { margin-top: .25em; } markdown-style dl { padding: 0; } markdown-style dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: 600; } markdown-style dl dd { padding: 0 16px; margin-bottom: 16px; } markdown-style table th { font-weight: 600; } markdown-style table th, markdown-style table td { padding: 6px 13px; border: 1px solid var(--color-border-default); } markdown-style table tr { background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted); } markdown-style table tr:nth-child(2n) { background-color: var(--color-canvas-subtle); } markdown-style table img { background-color: transparent; vertical-align: middle; } markdown-style img[align=right] { padding-left: 20px; } markdown-style img[align=left] { padding-right: 20px; } markdown-style .emoji { max-width: none; vertical-align: text-top; background-color: transparent; } markdown-style span.frame { display: block; overflow: hidden; } markdown-style span.frame>span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0 0; overflow: hidden; border: 1px solid var(--color-border-default); } markdown-style span.frame span img { display: block; float: left; } markdown-style span.frame span span { display: block; padding: 5px 0 0; clear: both; color: var(--color-fg-default); } markdown-style span.align-center { display: block; overflow: hidden; clear: both; } markdown-style span.align-center>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: center; } markdown-style span.align-center span img { margin: 0 auto; text-align: center; } markdown-style span.align-right { display: block; overflow: hidden; clear: both; } markdown-style span.align-right>span { display: block; margin: 13px 0 0; overflow: hidden; text-align: right; } markdown-style span.align-right span img { margin: 0; text-align: right; } markdown-style span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; } markdown-style span.float-left span { margin: 13px 0 0; } markdown-style span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; } markdown-style span.float-right>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: right; } markdown-style code, markdown-style tt { padding: .2em .4em; margin: 0; font-size: 85%; background-color: var(--color-neutral-muted); border-radius: 6px; } markdown-style code br, markdown-style tt br { display: none; } markdown-style del code { text-decoration: inherit; } markdown-style pre code { font-size: 100%; } markdown-style pre>code { padding: 0; margin: 0; word-break: normal; white-space: pre; background: transparent; border: 0; } markdown-style pre { position: relative; font-size: 85%; line-height: 1.45; background-color: var(--color-canvas-subtle); border-radius: 6px; } markdown-style pre code, markdown-style pre tt { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } markdown-style pre > code { padding: 16px; overflow: auto; display: block; } markdown-style .csv-data td, markdown-style .csv-data th { padding: 5px; overflow: hidden; font-size: 12px; line-height: 1; text-align: left; white-space: nowrap; } markdown-style .csv-data .blob-num { padding: 10px 8px 9px; text-align: right; background: var(--color-canvas-default); border: 0; } markdown-style .csv-data tr { border-top: 0; } markdown-style .csv-data th { font-weight: 600; background: var(--color-canvas-subtle); border-top: 0; } markdown-style .footnotes { font-size: 12px; color: var(--color-fg-muted); border-top: 1px solid var(--color-border-default); } markdown-style .footnotes ol { padding-left: 16px; } markdown-style .footnotes li { position: relative; } markdown-style .footnotes li:target::before { position: absolute; top: -8px; right: -8px; bottom: -8px; left: -24px; pointer-events: none; content: ""; border: 2px solid var(--color-accent-emphasis); border-radius: 6px; } markdown-style .footnotes li:target { color: var(--color-fg-default); } markdown-style .footnotes .data-footnote-backref g-emoji { font-family: monospace; } markdown-style .task-list-item { list-style-type: none; } markdown-style .task-list-item label { font-weight: 400; } markdown-style .task-list-item.enabled label { cursor: pointer; } markdown-style .task-list-item+.task-list-item { margin-top: 3px; } markdown-style .task-list-item .handle { display: none; } markdown-style .task-list-item-checkbox, markdown-style input[type="checkbox"] { margin: 0 .2em .25em -1.6em; vertical-align: middle; } markdown-style .contains-task-list:dir(rtl) .task-list-item-checkbox, markdown-style .contains-task-list:dir(rtl) input[type="checkbox"] { margin: 0 -1.6em .25em .2em; } markdown-style ::-webkit-calendar-picker-indicator { filter: invert(50%); }
</style>
<slot></slot>
`;
class MarkdownStyle extends HTMLElement {
    constructor() {
        super();
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(__TEMPLATE__.content.cloneNode(true));
        const style = Array.prototype.slice
            .call(this.shadow.children)
            .find((item) => item.tagName === 'STYLE');
        if (style) {
            const id = '__MARKDOWN_STYLE__';
            const findStyle = document.getElementById(id);
            if (!findStyle) {
                style.id = id;
                document.head.append(style);
            }
        }
    }
    get theme() {
        const value = this.getAttribute('theme');
        return value === null ? '' : value;
    }
    set theme(name) {
        this.setAttribute('theme', name);
    }
    connectedCallback() {
        if (!this.theme) {
            const { colorMode } = document.documentElement.dataset;
            this.theme = colorMode;
            const observer = new MutationObserver((mutationsList, observer) => {
                this.theme = document.documentElement.dataset.colorMode;
            });
            observer.observe(document.documentElement, { attributes: true });
            window.matchMedia('(prefers-color-scheme: light)').onchange = (event) => {
                this.theme = event.matches ? 'light' : 'dark';
            };
            window.matchMedia('(prefers-color-scheme: dark)').onchange = (event) => {
                this.theme = event.matches ? 'dark' : 'light';
            };
        }
    }
}
customElements.define('markdown-style', MarkdownStyle);</script><markdown-style style="max-width: 960px; margin: 0 auto 60px auto; padding: 8px;" class="markdown-style">
<h1 id="strace"><a class="anchor" aria-hidden="true" tabindex="-1" href="#strace"><span class="octicon octicon-link"></span></a>strace</h1>
<p>跟踪系统调用和信号</p>
<h2 id="补充说明"><a class="anchor" aria-hidden="true" tabindex="-1" href="#补充说明"><span class="octicon octicon-link"></span></a>补充说明</h2>
<p><strong>strace命令</strong> 是一个集诊断、调试、统计与一体的工具，我们可以使用strace对应用的系统调用和信号传递的跟踪结果来对应用进行分析，以达到解决问题或者是了解应用工作过程的目的。当然strace与专业的调试工具比如说gdb之类的是没法相比的，因为它不是一个专业的调试器。</p>
<p>strace的最简单的用法就是执行一个指定的命令，在指定的命令结束之后它也就退出了。在命令执行的过程中，strace会记录和解析命令进程的所有系统调用以及这个进程所接收到的所有的信号值。</p>
<h3 id="语法"><a class="anchor" aria-hidden="true" tabindex="-1" href="#语法"><span class="octicon octicon-link"></span></a>语法</h3>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">strace</span>  <span class="token punctuation">[</span>  <span class="token parameter variable">-dffhiqrtttTvxx</span>  <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-acolumn</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-eexpr</span> <span class="token punctuation">]</span> <span class="token punctuation">..</span>.
</span><span class="code-line line-number" line="2">    <span class="token punctuation">[</span> <span class="token parameter variable">-ofile</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span>-ppid <span class="token punctuation">]</span> <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token parameter variable">-sstrsize</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-uusername</span> <span class="token punctuation">]</span>
</span><span class="code-line line-number" line="3">    <span class="token punctuation">[</span> <span class="token parameter variable">-Evar</span><span class="token operator">=</span>val <span class="token punctuation">]</span> <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token parameter variable">-Evar</span>  <span class="token punctuation">]</span><span class="token punctuation">..</span>.
</span><span class="code-line line-number" line="4">     <span class="token punctuation">[</span>command <span class="token punctuation">[</span> arg <span class="token punctuation">..</span>.  <span class="token punctuation">]</span> <span class="token punctuation">]</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token function">strace</span>  <span class="token parameter variable">-c</span>  <span class="token punctuation">[</span> <span class="token parameter variable">-eexpr</span> <span class="token punctuation">]</span> <span class="token punctuation">..</span>.  <span class="token punctuation">[</span> <span class="token parameter variable">-Ooverhead</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-Ssortby</span> <span class="token punctuation">]</span>
</span><span class="code-line line-number" line="7">    <span class="token punctuation">[</span> <span class="token builtin class-name">command</span> <span class="token punctuation">[</span> arg<span class="token punctuation">..</span>.  <span class="token punctuation">]</span> <span class="token punctuation">]</span>
</span></code><div onclick="copied(this)" data-code="strace  [  -dffhiqrtttTvxx  ] [ -acolumn ] [ -eexpr ] ...
    [ -ofile ] [-ppid ] ...  [ -sstrsize ] [ -uusername ]
    [ -Evar=val ] ...  [ -Evar  ]...
     [command [ arg ...  ] ]

strace  -c  [ -eexpr ] ...  [ -Ooverhead ] [ -Ssortby ]
    [ command [ arg...  ] ]
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="选项"><a class="anchor" aria-hidden="true" tabindex="-1" href="#选项"><span class="octicon octicon-link"></span></a>选项</h3>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token parameter variable">-c</span> 统计每一系统调用的所执行的时间,次数和出错的次数等.
</span><span class="code-line line-number" line="2"><span class="token parameter variable">-d</span> 输出strace关于标准错误的调试信息.
</span><span class="code-line line-number" line="3"><span class="token parameter variable">-f</span> 跟踪由fork调用所产生的子进程.
</span><span class="code-line line-number" line="4"><span class="token parameter variable">-ff</span> 如果提供-o filename,则所有进程的跟踪结果输出到相应的filename.pid中,pid是各进程的进程号.
</span><span class="code-line line-number" line="5"><span class="token parameter variable">-F</span> 尝试跟踪vfork调用.在-f时,vfork不被跟踪.
</span><span class="code-line line-number" line="6"><span class="token parameter variable">-h</span> 输出简要的帮助信息.
</span><span class="code-line line-number" line="7"><span class="token parameter variable">-i</span> 输出系统调用的入口指针.
</span><span class="code-line line-number" line="8"><span class="token parameter variable">-q</span> 禁止输出关于脱离的消息.
</span><span class="code-line line-number" line="9"><span class="token parameter variable">-r</span> 打印出相对时间关于,,每一个系统调用.
</span><span class="code-line line-number" line="10"><span class="token parameter variable">-t</span> 在输出中的每一行前加上时间信息.
</span><span class="code-line line-number" line="11"><span class="token parameter variable">-tt</span> 在输出中的每一行前加上时间信息,微秒级.
</span><span class="code-line line-number" line="12"><span class="token parameter variable">-ttt</span> 微秒级输出,以秒了表示时间.
</span><span class="code-line line-number" line="13"><span class="token parameter variable">-T</span> 显示每一调用所耗的时间.
</span><span class="code-line line-number" line="14"><span class="token parameter variable">-v</span> 输出所有的系统调用.一些调用关于环境变量,状态,输入输出等调用由于使用频繁,默认不输出.
</span><span class="code-line line-number" line="15"><span class="token parameter variable">-V</span> 输出strace的版本信息.
</span><span class="code-line line-number" line="16"><span class="token parameter variable">-x</span> 以十六进制形式输出非标准字符串
</span><span class="code-line line-number" line="17"><span class="token parameter variable">-xx</span> 所有字符串以十六进制形式输出.
</span><span class="code-line line-number" line="18"><span class="token parameter variable">-a</span> <span class="token function">column</span> 设置返回值的输出位置.默认 为40.
</span><span class="code-line line-number" line="19"><span class="token parameter variable">-e</span> <span class="token function">expr</span> 指定一个表达式,用来控制如何跟踪.格式：<span class="token punctuation">[</span>qualifier<span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span>value1<span class="token punctuation">[</span>,value2<span class="token punctuation">]</span><span class="token punctuation">..</span>.
</span><span class="code-line line-number" line="20">qualifier只能是 trace,abbrev,verbose,raw,signal,read,write其中之一.value是用来限定的符号或数字.默认的 qualifier是 trace.感叹号是否定符号.例如:-eopen等价于 <span class="token parameter variable">-e</span> <span class="token assign-left variable">trace</span><span class="token operator">=</span>open,表示只跟踪open调用.而-etrace<span class="token operator">!=</span>open 表示跟踪除了open以外的其他调用.有两个特殊的符号 all 和 none. 注意有些shell使用<span class="token operator">!</span>来执行历史记录里的命令,所以要使用<span class="token punctuation">\</span><span class="token punctuation">\</span>.
</span><span class="code-line line-number" line="21"><span class="token parameter variable">-e</span> <span class="token assign-left variable">trace</span><span class="token operator">=</span>set 只跟踪指定的系统 调用.例如:-e <span class="token assign-left variable">trace</span><span class="token operator">=</span>open,close,rean,write表示只跟踪这四个系统调用.默认的为set<span class="token operator">=</span>all.
</span><span class="code-line line-number" line="22"><span class="token parameter variable">-e</span> <span class="token assign-left variable">trace</span><span class="token operator">=</span>file 只跟踪有关文件操作的系统调用.
</span><span class="code-line line-number" line="23"><span class="token parameter variable">-e</span> <span class="token assign-left variable">trace</span><span class="token operator">=</span>process 只跟踪有关进程控制的系统调用.
</span><span class="code-line line-number" line="24"><span class="token parameter variable">-e</span> <span class="token assign-left variable">trace</span><span class="token operator">=</span>network 跟踪与网络有关的所有系统调用.
</span><span class="code-line line-number" line="25"><span class="token parameter variable">-e</span> <span class="token assign-left variable">strace</span><span class="token operator">=</span>signal 跟踪所有与系统信号有关的 系统调用
</span><span class="code-line line-number" line="26"><span class="token parameter variable">-e</span> <span class="token assign-left variable">trace</span><span class="token operator">=</span>ipc 跟踪所有与进程通讯有关的系统调用
</span><span class="code-line line-number" line="27"><span class="token parameter variable">-e</span> <span class="token assign-left variable">abbrev</span><span class="token operator">=</span>set 设定strace输出的系统调用的结果集.-v 等与 <span class="token assign-left variable">abbrev</span><span class="token operator">=</span>none.默认为abbrev<span class="token operator">=</span>all.
</span><span class="code-line line-number" line="28"><span class="token parameter variable">-e</span> <span class="token assign-left variable">raw</span><span class="token operator">=</span>set 将指定的系统调用的参数以十六进制显示.
</span><span class="code-line line-number" line="29"><span class="token parameter variable">-e</span> <span class="token assign-left variable">signal</span><span class="token operator">=</span>set 指定跟踪的系统信号.默认为all.如 <span class="token assign-left variable">signal</span><span class="token operator">=</span><span class="token operator">!</span>SIGIO<span class="token punctuation">(</span>或者signal<span class="token operator">=</span><span class="token operator">!</span>io<span class="token punctuation">)</span>,表示不跟踪SIGIO信号.
</span><span class="code-line line-number" line="30"><span class="token parameter variable">-e</span> <span class="token assign-left variable">read</span><span class="token operator">=</span>set 输出从指定文件中读出 的数据.例如: <span class="token parameter variable">-e</span> <span class="token assign-left variable">read</span><span class="token operator">=</span><span class="token number">3,5</span>
</span><span class="code-line line-number" line="31"><span class="token parameter variable">-e</span> <span class="token assign-left variable">write</span><span class="token operator">=</span>set 输出写入到指定文件中的数据.
</span><span class="code-line line-number" line="32"><span class="token parameter variable">-o</span> filename 将strace的输出写入文件filename
</span><span class="code-line line-number" line="33"><span class="token parameter variable">-p</span> pid 跟踪指定的进程pid.
</span><span class="code-line line-number" line="34"><span class="token parameter variable">-s</span> strsize 指定输出的字符串的最大长度.默认为32.文件名一直全部输出.
</span><span class="code-line line-number" line="35"><span class="token parameter variable">-u</span> username 以username的<span class="token environment constant">UID</span>和GID执行被跟踪的命令
</span></code><div onclick="copied(this)" data-code="-c 统计每一系统调用的所执行的时间,次数和出错的次数等.
-d 输出strace关于标准错误的调试信息.
-f 跟踪由fork调用所产生的子进程.
-ff 如果提供-o filename,则所有进程的跟踪结果输出到相应的filename.pid中,pid是各进程的进程号.
-F 尝试跟踪vfork调用.在-f时,vfork不被跟踪.
-h 输出简要的帮助信息.
-i 输出系统调用的入口指针.
-q 禁止输出关于脱离的消息.
-r 打印出相对时间关于,,每一个系统调用.
-t 在输出中的每一行前加上时间信息.
-tt 在输出中的每一行前加上时间信息,微秒级.
-ttt 微秒级输出,以秒了表示时间.
-T 显示每一调用所耗的时间.
-v 输出所有的系统调用.一些调用关于环境变量,状态,输入输出等调用由于使用频繁,默认不输出.
-V 输出strace的版本信息.
-x 以十六进制形式输出非标准字符串
-xx 所有字符串以十六进制形式输出.
-a column 设置返回值的输出位置.默认 为40.
-e expr 指定一个表达式,用来控制如何跟踪.格式：[qualifier=][!]value1[,value2]...
qualifier只能是 trace,abbrev,verbose,raw,signal,read,write其中之一.value是用来限定的符号或数字.默认的 qualifier是 trace.感叹号是否定符号.例如:-eopen等价于 -e trace=open,表示只跟踪open调用.而-etrace!=open 表示跟踪除了open以外的其他调用.有两个特殊的符号 all 和 none. 注意有些shell使用!来执行历史记录里的命令,所以要使用\\.
-e trace=set 只跟踪指定的系统 调用.例如:-e trace=open,close,rean,write表示只跟踪这四个系统调用.默认的为set=all.
-e trace=file 只跟踪有关文件操作的系统调用.
-e trace=process 只跟踪有关进程控制的系统调用.
-e trace=network 跟踪与网络有关的所有系统调用.
-e strace=signal 跟踪所有与系统信号有关的 系统调用
-e trace=ipc 跟踪所有与进程通讯有关的系统调用
-e abbrev=set 设定strace输出的系统调用的结果集.-v 等与 abbrev=none.默认为abbrev=all.
-e raw=set 将指定的系统调用的参数以十六进制显示.
-e signal=set 指定跟踪的系统信号.默认为all.如 signal=!SIGIO(或者signal=!io),表示不跟踪SIGIO信号.
-e read=set 输出从指定文件中读出 的数据.例如: -e read=3,5
-e write=set 输出写入到指定文件中的数据.
-o filename 将strace的输出写入文件filename
-p pid 跟踪指定的进程pid.
-s strsize 指定输出的字符串的最大长度.默认为32.文件名一直全部输出.
-u username 以username的UID和GID执行被跟踪的命令
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="实例"><a class="anchor" aria-hidden="true" tabindex="-1" href="#实例"><span class="octicon octicon-link"></span></a>实例</h3>
<p><strong>追踪系统调用</strong></p>
<p>现在我们做一个很简单的程序来演示strace的基本用法。这个程序的C语言代码如下：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># filename test.c</span>
</span><span class="code-line line-number" line="2"><span class="token comment">#include &#x3C;stdio.h></span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">int <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    int a<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">    scanf<span class="token punctuation">(</span><span class="token string">"%d"</span>, <span class="token operator">&#x26;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">    printf<span class="token punctuation">(</span><span class="token string">"%09d<span class="token entity" title="\n">\n</span>"</span>, a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="# filename test.c
#include <stdio.h>

int main()
{
    int a;
    scanf(&#x22;%d&#x22;, &#x26;a);
    printf(&#x22;%09d\n&#x22;, a);
    return 0;
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>然后我们用<code>gcc -o test test.c</code>编译一下，得到一个可执行的文件test。然后用strace调用执行：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">strace</span> ./test
</span></code><div onclick="copied(this)" data-code="strace ./test
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>执行期间会要求你输入一个整数，我们输入99，最后得到如下的结果：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">// 直接执行test的结果
</span><span class="code-line line-number" line="2">oracle@orainst<span class="token punctuation">[</span>orcl<span class="token punctuation">]</span>:~ $./test
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">// 执行的结果
</span><span class="code-line line-number" line="5"><span class="token number">99</span>
</span><span class="code-line line-number" line="6">000000099
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">// 通过strace执行test的结果
</span><span class="code-line line-number" line="9">oracle@orainst<span class="token punctuation">[</span>orcl<span class="token punctuation">]</span>:~ <span class="token variable">$strace</span> ./test
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">// strace的trace结果
</span><span class="code-line line-number" line="12">execve<span class="token punctuation">(</span><span class="token string">"./test"</span>, <span class="token punctuation">[</span><span class="token string">"./test"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span>/* <span class="token number">41</span> vars */<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="13">uname<span class="token punctuation">(</span><span class="token punctuation">{</span>sys<span class="token operator">=</span><span class="token string">"Linux"</span>, <span class="token assign-left variable">node</span><span class="token operator">=</span><span class="token string">"orainst.desktop.mycompany.com"</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="14">brk<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                                  <span class="token operator">=</span> 0x8078000
</span><span class="code-line line-number" line="15">fstat64<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFREG<span class="token operator">|</span>0644, <span class="token assign-left variable">st_size</span><span class="token operator">=</span><span class="token number">65900</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="16">old_mmap<span class="token punctuation">(</span>NULL, <span class="token number">65900</span>, PROT_READ, MAP_PRIVATE, <span class="token number">3</span>, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5ef000
</span><span class="code-line line-number" line="17">close<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>                                <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="18">open<span class="token punctuation">(</span><span class="token string">"/lib/tls/libc.so.6"</span>, O_RDONLY<span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">3</span>
</span><span class="code-line line-number" line="19">read<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token string">"<span class="token entity" title="\177">\177</span>ELF<span class="token entity" title="\1">\1</span><span class="token entity" title="\1">\1</span><span class="token entity" title="\1">\1</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\3">\3</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\3">\3</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\1">\1</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\200">\200</span>X<span class="token entity" title="\1">\1</span>"</span><span class="token punctuation">..</span>., <span class="token number">512</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">512</span>
</span><span class="code-line line-number" line="20">fstat64<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFREG<span class="token operator">|</span>0755, <span class="token assign-left variable">st_size</span><span class="token operator">=</span><span class="token number">1571692</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="21">old_mmap<span class="token punctuation">(</span>NULL, <span class="token number">4096</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5ee000
</span><span class="code-line line-number" line="22">old_mmap<span class="token punctuation">(</span>NULL, <span class="token number">1275340</span>, PROT_READ<span class="token operator">|</span>PROT_EXEC, MAP_PRIVATE, <span class="token number">3</span>, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xa02000
</span><span class="code-line line-number" line="23">old_mmap<span class="token punctuation">(</span>0xb34000, <span class="token number">12288</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_FIXED, <span class="token number">3</span>, 0x132000<span class="token punctuation">)</span> <span class="token operator">=</span> 0xb34000
</span><span class="code-line line-number" line="24">old_mmap<span class="token punctuation">(</span>0xb37000, <span class="token number">9676</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_FIXED<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xb37000
</span><span class="code-line line-number" line="25">close<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>                                <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="26">set_thread_area<span class="token punctuation">(</span><span class="token punctuation">{</span>entry_number:-1 -<span class="token operator">></span> <span class="token number">6</span>, base_addr:0xbf5ee740, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="27">munmap<span class="token punctuation">(</span>0xbf5ef000, <span class="token number">65900</span><span class="token punctuation">)</span>               <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="28">fstat64<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFCHR<span class="token operator">|</span>0620, <span class="token assign-left variable">st_rdev</span><span class="token operator">=</span>makedev<span class="token punctuation">(</span><span class="token number">136</span>, <span class="token number">0</span><span class="token punctuation">)</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="29">mmap2<span class="token punctuation">(</span>NULL, <span class="token number">4096</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5ff000
</span><span class="code-line line-number" line="30">read<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">99</span>
</span><span class="code-line line-number" line="31"><span class="token string">"99<span class="token entity" title="\n">\n</span>"</span>, <span class="token number">1024</span><span class="token punctuation">)</span>                   <span class="token operator">=</span> <span class="token number">3</span>
</span><span class="code-line line-number" line="32">fstat64<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFCHR<span class="token operator">|</span>0620, <span class="token assign-left variable">st_rdev</span><span class="token operator">=</span>makedev<span class="token punctuation">(</span><span class="token number">136</span>, <span class="token number">0</span><span class="token punctuation">)</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="33">mmap2<span class="token punctuation">(</span>NULL, <span class="token number">4096</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5fe000
</span><span class="code-line line-number" line="34">write<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token string">"000000099<span class="token entity" title="\n">\n</span>"</span>, <span class="token number">10000000099</span>
</span><span class="code-line line-number" line="35"><span class="token punctuation">)</span>             <span class="token operator">=</span> <span class="token number">10</span>
</span><span class="code-line line-number" line="36">munmap<span class="token punctuation">(</span>0xbf5fe000, <span class="token number">4096</span><span class="token punctuation">)</span>                <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="37">exit_group<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                           <span class="token operator">=</span> ?
</span></code><div onclick="copied(this)" data-code="// 直接执行test的结果
oracle@orainst[orcl]:~ $./test

// 执行的结果
99
000000099

// 通过strace执行test的结果
oracle@orainst[orcl]:~ $strace ./test

// strace的trace结果
execve(&#x22;./test&#x22;, [&#x22;./test&#x22;], [/* 41 vars */]) = 0
uname({sys=&#x22;Linux&#x22;, node=&#x22;orainst.desktop.mycompany.com&#x22;, ...}) = 0
brk(0)                                  = 0x8078000
fstat64(3, {st_mode=S_IFREG|0644, st_size=65900, ...}) = 0
old_mmap(NULL, 65900, PROT_READ, MAP_PRIVATE, 3, 0) = 0xbf5ef000
close(3)                                = 0
open(&#x22;/lib/tls/libc.so.6&#x22;, O_RDONLY)    = 3
read(3, &#x22;\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\200X\1&#x22;..., 512) = 512
fstat64(3, {st_mode=S_IFREG|0755, st_size=1571692, ...}) = 0
old_mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xbf5ee000
old_mmap(NULL, 1275340, PROT_READ|PROT_EXEC, MAP_PRIVATE, 3, 0) = 0xa02000
old_mmap(0xb34000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x132000) = 0xb34000
old_mmap(0xb37000, 9676, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xb37000
close(3)                                = 0
set_thread_area({entry_number:-1 -> 6, base_addr:0xbf5ee740, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}) = 0
munmap(0xbf5ef000, 65900)               = 0
fstat64(0, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xbf5ff000
read(0, 99
&#x22;99\n&#x22;, 1024)                   = 3
fstat64(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xbf5fe000
write(1, &#x22;000000099\n&#x22;, 10000000099
)             = 10
munmap(0xbf5fe000, 4096)                = 0
exit_group(0)                           = ?
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>从trace结构可以看到，系统首先调用execve开始一个新的进行，接着进行些环境的初始化操作，最后停顿在”read(0,”上面，这也就是执行到了我们的scanf函数，等待我们输入数字呢，在输入完99之后，在调用write函数将格式化后的数值”000000099″输出到屏幕，最后调用exit_group退出进行，完成整个程序的执行过程。</p>
<p><strong>跟踪信号传递</strong></p>
<p>我们还是使用上面的那个test程序，来观察进程接收信号的情况。还是先<code>strace ./test</code>，等到等待输入的画面的时候不要输入任何东西，然后打开另外一个窗口，输入如下的命令</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">killall</span> <span class="token builtin class-name">test</span>
</span></code><div onclick="copied(this)" data-code="killall test
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>这时候就能看到我们的程序推出了，最后的trace结果如下：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">oracle@orainst<span class="token punctuation">[</span>orcl<span class="token punctuation">]</span>:~
</span><span class="code-line line-number" line="2"><span class="token variable">$strace</span> ./test
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">execve<span class="token punctuation">(</span><span class="token string">"./test"</span>, <span class="token punctuation">[</span><span class="token string">"./test"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span>/* <span class="token number">41</span> vars */<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="5">uname<span class="token punctuation">(</span><span class="token punctuation">{</span>sys<span class="token operator">=</span><span class="token string">"Linux"</span>, <span class="token assign-left variable">node</span><span class="token operator">=</span><span class="token string">"orainst.desktop.mycompany.com"</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="6">brk<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                                  <span class="token operator">=</span> 0x9ae2000
</span><span class="code-line line-number" line="7">old_mmap<span class="token punctuation">(</span>NULL, <span class="token number">65900</span>, PROT_READ, MAP_PRIVATE, <span class="token number">3</span>, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5ef000
</span><span class="code-line line-number" line="8">close<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>                                <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="9">open<span class="token punctuation">(</span><span class="token string">"/lib/tls/libc.so.6"</span>, O_RDONLY<span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">3</span>
</span><span class="code-line line-number" line="10">read<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token string">"<span class="token entity" title="\177">\177</span>ELF<span class="token entity" title="\1">\1</span><span class="token entity" title="\1">\1</span><span class="token entity" title="\1">\1</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\3">\3</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\3">\3</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\1">\1</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\200">\200</span>X<span class="token entity" title="\1">\1</span>"</span><span class="token punctuation">..</span>., <span class="token number">512</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">512</span>
</span><span class="code-line line-number" line="11">fstat64<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFREG<span class="token operator">|</span>0755, <span class="token assign-left variable">st_size</span><span class="token operator">=</span><span class="token number">1571692</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="12">old_mmap<span class="token punctuation">(</span>NULL, <span class="token number">4096</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5ee000
</span><span class="code-line line-number" line="13">old_mmap<span class="token punctuation">(</span>NULL, <span class="token number">1275340</span>, PROT_READ<span class="token operator">|</span>PROT_EXEC, MAP_PRIVATE, <span class="token number">3</span>, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0x2e9000
</span><span class="code-line line-number" line="14">old_mmap<span class="token punctuation">(</span>0x41b000, <span class="token number">12288</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_FIXED, <span class="token number">3</span>, 0x132000<span class="token punctuation">)</span> <span class="token operator">=</span> 0x41b000
</span><span class="code-line line-number" line="15">old_mmap<span class="token punctuation">(</span>0x41e000, <span class="token number">9676</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_FIXED<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0x41e000
</span><span class="code-line line-number" line="16">close<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>                                <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="17">set_thread_area<span class="token punctuation">(</span><span class="token punctuation">{</span>entry_number:-1 -<span class="token operator">></span> <span class="token number">6</span>, base_addr:0xbf5ee740, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="18">munmap<span class="token punctuation">(</span>0xbf5ef000, <span class="token number">65900</span><span class="token punctuation">)</span>               <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="19">fstat64<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFCHR<span class="token operator">|</span>0620, <span class="token assign-left variable">st_rdev</span><span class="token operator">=</span>makedev<span class="token punctuation">(</span><span class="token number">136</span>, <span class="token number">0</span><span class="token punctuation">)</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="20">mmap2<span class="token punctuation">(</span>NULL, <span class="token number">4096</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5ff000
</span><span class="code-line line-number" line="21">read<span class="token punctuation">(</span><span class="token number">0</span>, 0xbf5ff000, <span class="token number">1024</span><span class="token punctuation">)</span>               <span class="token operator">=</span> ? ERESTARTSYS <span class="token punctuation">(</span>To be restarted<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="22">--- SIGTERM <span class="token punctuation">(</span>Terminated<span class="token punctuation">)</span> @ <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> ---
</span><span class="code-line line-number" line="23">+++ killed by SIGTERM +++
</span></code><div onclick="copied(this)" data-code="oracle@orainst[orcl]:~
$strace ./test

execve(&#x22;./test&#x22;, [&#x22;./test&#x22;], [/* 41 vars */]) = 0
uname({sys=&#x22;Linux&#x22;, node=&#x22;orainst.desktop.mycompany.com&#x22;, ...}) = 0
brk(0)                                  = 0x9ae2000
old_mmap(NULL, 65900, PROT_READ, MAP_PRIVATE, 3, 0) = 0xbf5ef000
close(3)                                = 0
open(&#x22;/lib/tls/libc.so.6&#x22;, O_RDONLY)    = 3
read(3, &#x22;\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\200X\1&#x22;..., 512) = 512
fstat64(3, {st_mode=S_IFREG|0755, st_size=1571692, ...}) = 0
old_mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xbf5ee000
old_mmap(NULL, 1275340, PROT_READ|PROT_EXEC, MAP_PRIVATE, 3, 0) = 0x2e9000
old_mmap(0x41b000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x132000) = 0x41b000
old_mmap(0x41e000, 9676, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x41e000
close(3)                                = 0
set_thread_area({entry_number:-1 -> 6, base_addr:0xbf5ee740, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}) = 0
munmap(0xbf5ef000, 65900)               = 0
fstat64(0, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xbf5ff000
read(0, 0xbf5ff000, 1024)               = ? ERESTARTSYS (To be restarted)
--- SIGTERM (Terminated) @ 0 (0) ---
+++ killed by SIGTERM +++
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>trace中很清楚的告诉你test进程”+++ killed by SIGTERM +++”。</p>
<p><strong>系统调用统计</strong></p>
<p>strace不光能追踪系统调用，通过使用参数-c，它还能将进程所有的系统调用做一个统计分析给你，下面就来看看strace的统计，这次我们执行带-c参数的strace：</p>
<p>strace -c ./test</p>
<p>最后能得到这样的trace结果：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">oracle@orainst<span class="token punctuation">[</span>orcl<span class="token punctuation">]</span>:~
</span><span class="code-line line-number" line="2"><span class="token variable">$strace</span> <span class="token parameter variable">-c</span> ./test
</span></code><div onclick="copied(this)" data-code="oracle@orainst[orcl]:~
$strace -c ./test
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">execve<span class="token punctuation">(</span><span class="token string">"./test"</span>, <span class="token punctuation">[</span><span class="token string">"./test"</span><span class="token punctuation">]</span>, <span class="token punctuation">[</span>/* <span class="token number">41</span> vars */<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="2">% <span class="token function">time</span>     seconds  usecs/call     calls    errors syscall
</span><span class="code-line line-number" line="3">------ ----------- ----------- --------- --------- ----------------
</span><span class="code-line line-number" line="4"> <span class="token number">45.90</span>    <span class="token number">0.000140</span>           <span class="token number">5</span>        <span class="token number">27</span>        <span class="token number">25</span> <span class="token function">open</span>
</span><span class="code-line line-number" line="5"> <span class="token number">34.43</span>    <span class="token number">0.000105</span>           <span class="token number">4</span>        <span class="token number">24</span>        <span class="token number">21</span> stat64
</span><span class="code-line line-number" line="6">  <span class="token number">7.54</span>    <span class="token number">0.000023</span>           <span class="token number">5</span>         <span class="token number">5</span>           old_mmap
</span><span class="code-line line-number" line="7">  <span class="token number">2.62</span>    <span class="token number">0.000008</span>           <span class="token number">8</span>         <span class="token number">1</span>           munmap
</span><span class="code-line line-number" line="8">  <span class="token number">1.97</span>    <span class="token number">0.000006</span>           <span class="token number">6</span>         <span class="token number">1</span>           <span class="token function">uname</span>
</span><span class="code-line line-number" line="9">  <span class="token number">1.97</span>    <span class="token number">0.000006</span>           <span class="token number">2</span>         <span class="token number">3</span>           fstat64
</span><span class="code-line line-number" line="10">  <span class="token number">1.64</span>    <span class="token number">0.000005</span>           <span class="token number">3</span>         <span class="token number">2</span>         <span class="token number">1</span> <span class="token builtin class-name">read</span>
</span><span class="code-line line-number" line="11">  <span class="token number">1.31</span>    <span class="token number">0.000004</span>           <span class="token number">2</span>         <span class="token number">2</span>           close
</span><span class="code-line line-number" line="12">  <span class="token number">0.98</span>    <span class="token number">0.000003</span>           <span class="token number">3</span>         <span class="token number">1</span>           brk
</span><span class="code-line line-number" line="13">  <span class="token number">0.98</span>    <span class="token number">0.000003</span>           <span class="token number">3</span>         <span class="token number">1</span>           mmap2
</span><span class="code-line line-number" line="14">  <span class="token number">0.66</span>    <span class="token number">0.000002</span>           <span class="token number">2</span>         <span class="token number">1</span>           set_thread_area
</span><span class="code-line line-number" line="15">------ ----------- ----------- --------- --------- ----------------
</span><span class="code-line line-number" line="16"><span class="token number">100.00</span>    <span class="token number">0.000305</span>                    <span class="token number">68</span>        <span class="token number">47</span> total
</span></code><div onclick="copied(this)" data-code="execve(&#x22;./test&#x22;, [&#x22;./test&#x22;], [/* 41 vars */]) = 0
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 45.90    0.000140           5        27        25 open
 34.43    0.000105           4        24        21 stat64
  7.54    0.000023           5         5           old_mmap
  2.62    0.000008           8         1           munmap
  1.97    0.000006           6         1           uname
  1.97    0.000006           2         3           fstat64
  1.64    0.000005           3         2         1 read
  1.31    0.000004           2         2           close
  0.98    0.000003           3         1           brk
  0.98    0.000003           3         1           mmap2
  0.66    0.000002           2         1           set_thread_area
------ ----------- ----------- --------- --------- ----------------
100.00    0.000305                    68        47 total
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>这里很清楚的告诉你调用了那些系统函数，调用次数多少，消耗了多少时间等等这些信息，这个对我们分析一个程序来说是非常有用的。</p>
<h3 id="常用参数说明"><a class="anchor" aria-hidden="true" tabindex="-1" href="#常用参数说明"><span class="octicon octicon-link"></span></a>常用参数说明</h3>
<p>除了-c参数之外，strace还提供了其他有用的参数给我们，让我们能很方便的得到自己想要的信息，下面就对那些常用的参数一一做个介绍。</p>
<p><strong>重定向输出</strong></p>
<p>参数-o用在将strace的结果输出到文件中，如果不指定-o参数的话，默认的输出设备是STDERR，也就是说使用”-o filename”和” 2>filename”的结果是一样的。</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># 这两个命令都是将strace结果输出到文件test.txt中</span>
</span><span class="code-line line-number" line="2"><span class="token function">strace</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-o</span> test.txt ./test
</span><span class="code-line line-number" line="3"><span class="token function">strace</span> <span class="token parameter variable">-c</span> ./test  <span class="token operator"><span class="token file-descriptor important">2</span>></span>test.txt
</span></code><div onclick="copied(this)" data-code="# 这两个命令都是将strace结果输出到文件test.txt中
strace -c -o test.txt ./test
strace -c ./test  2>test.txt
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>对系统调用进行计时</strong></p>
<p>strace可以使用参数-T将每个系统调用所花费的时间打印出来，每个调用的时间花销现在在调用行最右边的尖括号里面。</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">oracle@orainst<span class="token punctuation">[</span>orcl<span class="token punctuation">]</span>:~
</span><span class="code-line line-number" line="2"><span class="token variable">$strace</span> <span class="token parameter variable">-T</span> ./test
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">// 这里只摘录部分结果
</span><span class="code-line line-number" line="5">read<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">1</span>
</span><span class="code-line line-number" line="6"><span class="token string">"1<span class="token entity" title="\n">\n</span>"</span>, <span class="token number">1024</span><span class="token punctuation">)</span>                    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">&#x3C;</span><span class="token number">2.67345</span><span class="token operator"><span class="token file-descriptor important">5</span>></span>
</span><span class="code-line line-number" line="7">fstat64<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token punctuation">{</span>st_mode<span class="token operator">=</span>S_IFCHR<span class="token operator">|</span>0620, <span class="token assign-left variable">st_rdev</span><span class="token operator">=</span>makedev<span class="token punctuation">(</span><span class="token number">136</span>, <span class="token number">0</span><span class="token punctuation">)</span>, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">&#x3C;</span><span class="token number">0.00001</span><span class="token operator"><span class="token file-descriptor important">4</span>></span>
</span><span class="code-line line-number" line="8">mmap2<span class="token punctuation">(</span>NULL, <span class="token number">4096</span>, PROT_READ<span class="token operator">|</span>PROT_WRITE, MAP_PRIVATE<span class="token operator">|</span>MAP_ANONYMOUS, -1, <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> 0xbf5fe000 <span class="token operator">&#x3C;</span><span class="token number">0.00001</span><span class="token operator"><span class="token file-descriptor important">7</span>></span>
</span><span class="code-line line-number" line="9">write<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token string">"000000001<span class="token entity" title="\n">\n</span>"</span>, <span class="token number">10000000001</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">)</span>             <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">&#x3C;</span><span class="token number">0.00001</span><span class="token operator"><span class="token file-descriptor important">6</span>></span>
</span><span class="code-line line-number" line="11">munmap<span class="token punctuation">(</span>0xbf5fe000, <span class="token number">4096</span><span class="token punctuation">)</span>                <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">&#x3C;</span><span class="token number">0.00002</span><span class="token operator"><span class="token file-descriptor important">0</span>></span>
</span><span class="code-line line-number" line="12">exit_group<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                           <span class="token operator">=</span> ?
</span></code><div onclick="copied(this)" data-code="oracle@orainst[orcl]:~
$strace -T ./test

// 这里只摘录部分结果
read(0, 1
&#x22;1\n&#x22;, 1024)                    = 2 <2.673455>
fstat64(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0 <0.000014>
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xbf5fe000 <0.000017>
write(1, &#x22;000000001\n&#x22;, 10000000001
)             = 10 <0.000016>
munmap(0xbf5fe000, 4096)                = 0 <0.000020>
exit_group(0)                           = ?
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>系统调用的时间</strong></p>
<p>这是一个很有用的功能，strace会将每次系统调用的发生时间记录下来，只要使用-t/tt/ttt三个参数就可以看到效果了，具体的例子可以自己去尝试。</p>
<table>
  <thead>
    <tr>
      <th>参数名</th>
      <th>输出样式</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-t</td>
      <td>10:33:04 exit_group(0)</td>
      <td>输出结果精确到秒</td>
    </tr>
    <tr>
      <td>-tt</td>
      <td>10:33:48.159682 exit_group(0)</td>
      <td>输出结果精确到微妙</td>
    </tr>
    <tr>
      <td>-ttt</td>
      <td>1262169244.788478 exit_group(0)</td>
      <td>精确到微妙，而且时间表示为unix时间戳</td>
    </tr>
  </tbody>
</table>
<p><strong>截断输出</strong></p>
<p>-s参数用于指定trace结果的每一行输出的字符串的长度，下面看看test程序中-s参数对结果有什么影响，现指定-s为20，然后在read的是是很我们输入一个超过20个字符的数字串</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">strace</span> <span class="token parameter variable">-s</span> <span class="token number">20</span> ./test
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">read<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">2222222222222222222222222</span>      // 我们输入的2一共有25个
</span><span class="code-line line-number" line="4"><span class="token string">"22222222222222222222"</span><span class="token punctuation">..</span>., <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">26</span>  // 而我们看到的结果中2只有20个
</span></code><div onclick="copied(this)" data-code="strace -s 20 ./test

read(0, 2222222222222222222222222      // 我们输入的2一共有25个
&#x22;22222222222222222222&#x22;..., 1024) = 26  // 而我们看到的结果中2只有20个
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>trace一个现有的进程</strong></p>
<p>strace不光能自己初始化一个进程进行trace，还能追踪现有的进程，参数-p就是取这个作用的，用法也很简单，具体如下。</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">strace</span> <span class="token parameter variable">-p</span> pid
</span></code><div onclick="copied(this)" data-code="strace -p pid
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="综合例子"><a class="anchor" aria-hidden="true" tabindex="-1" href="#综合例子"><span class="octicon octicon-link"></span></a>综合例子</h3>
<p>说了那么多的功能和参数，现在我们来一个实用点的，就是研究下Oracle的lgwr进程，看看这个进程是不是像文档所说的那样没3s钟写一次log文件，考虑到lgwr写日志的触发条件比较多，我们需要找一个空闲的Oracle实例做这个实验。</p>
<p>我们先要得到lgwr进程的pid，运行下面的命令</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> lgwr
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">oracle    <span class="token number">5912</span>     <span class="token number">1</span>  <span class="token number">0</span> Nov12 ?        00:14:56 ora_lgwr_orcl
</span></code><div onclick="copied(this)" data-code="ps -ef|grep lgwr

oracle    5912     1  0 Nov12 ?        00:14:56 ora_lgwr_orcl
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>得到lgwr的pid是5912，现在启动strace，然后将trace的几个输出到lgwr.txt文件中，执行下面的命令</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">strace</span> <span class="token parameter variable">-tt</span> <span class="token parameter variable">-s</span> <span class="token number">10</span> <span class="token parameter variable">-o</span> lgwr.txt <span class="token parameter variable">-p</span> <span class="token number">5912</span>
</span></code><div onclick="copied(this)" data-code="strace -tt -s 10 -o lgwr.txt -p 5912
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>过一会之后停止strace，然后查看结果。由于输出的结果比较多，为了方便我们只看Oracle写入log文件时用的pwrite函数的调用</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token function">grep</span> pwrite<span class="token punctuation">\</span><span class="token punctuation">(</span><span class="token number">20</span> lgwr.txt
</span></code><div onclick="copied(this)" data-code="grep pwrite\(20 lgwr.txt
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>等等，为什么grep的时候用的是”pwrite(2″呢？，因为我知道我这个机器打开的当前的log文件的句柄编号都是2开始的。具体查找方法是先使用下面的语句找出当前活动的日志文件都有哪些：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">select</span> member, <span class="token function">v</span><span class="token variable">$log</span>.status from <span class="token function">v</span><span class="token variable">$log</span>, <span class="token function">v</span><span class="token variable">$logfile</span>
</span><span class="code-line line-number" line="2">where <span class="token function">v</span><span class="token variable">$log</span>.group<span class="token comment">#=v$logfile.group#;</span>
</span></code><div onclick="copied(this)" data-code="select member, v$log.status from v$log, v$logfile
where v$log.group#=v$logfile.group#;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>得到</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">MEMBER                                             STATUS
</span><span class="code-line line-number" line="2">-------------------------------------------------- ----------------
</span><span class="code-line line-number" line="3">/db/databases/orcl/redo-01-a/redo-t01-g03-m1.log    INACTIVE
</span><span class="code-line line-number" line="4">/db/databases/orcl/redo-03-a/redo-t01-g03-m2.log    INACTIVE
</span><span class="code-line line-number" line="5">/db/databases/orcl/redo-02-a/redo-t01-g02-m1.log    CURRENT
</span><span class="code-line line-number" line="6">/db/databases/orcl/redo-04-a/redo-t01-g02-m2.log    CURRENT
</span><span class="code-line line-number" line="7">/db/databases/orcl/redo-01-a/redo-t01-g01-m1.log    INACTIVE
</span><span class="code-line line-number" line="8">/db/databases/orcl/redo-03-a/redo-t01-g01-m2.log    INACTIVE
</span><span class="code-line line-number" line="9">/db/databases/orcl/redo-02-a/redo-t01-g04-m1.log    INACTIVE
</span><span class="code-line line-number" line="10">/db/databases/orcl/redo-04-a/redo-t01-g04-m2.log    INACTIVE
</span></code><div onclick="copied(this)" data-code="MEMBER                                             STATUS
-------------------------------------------------- ----------------
/db/databases/orcl/redo-01-a/redo-t01-g03-m1.log    INACTIVE
/db/databases/orcl/redo-03-a/redo-t01-g03-m2.log    INACTIVE
/db/databases/orcl/redo-02-a/redo-t01-g02-m1.log    CURRENT
/db/databases/orcl/redo-04-a/redo-t01-g02-m2.log    CURRENT
/db/databases/orcl/redo-01-a/redo-t01-g01-m1.log    INACTIVE
/db/databases/orcl/redo-03-a/redo-t01-g01-m2.log    INACTIVE
/db/databases/orcl/redo-02-a/redo-t01-g04-m1.log    INACTIVE
/db/databases/orcl/redo-04-a/redo-t01-g04-m2.log    INACTIVE
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>然后到/proc中去找打开文件的句柄：</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">ll /proc/.5912/fd/
</span></code><div onclick="copied(this)" data-code="ll /proc/.5912/fd/
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>得到</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">18</span> -<span class="token operator">></span> /db/databases/orcl/redo-01-a/redo-t01-g01-m1.log
</span><span class="code-line line-number" line="2">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">19</span> -<span class="token operator">></span> /db/databases/orcl/redo-03-a/redo-t01-g01-m2.log
</span><span class="code-line line-number" line="3">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">20</span> -<span class="token operator">></span> /db/databases/orcl/redo-02-a/redo-t01-g02-m1.log
</span><span class="code-line line-number" line="4">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">21</span> -<span class="token operator">></span> /db/databases/orcl/redo-04-a/redo-t01-g02-m2.log
</span><span class="code-line line-number" line="5">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">22</span> -<span class="token operator">></span> /db/databases/orcl/redo-01-a/redo-t01-g03-m1.log
</span><span class="code-line line-number" line="6">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">23</span> -<span class="token operator">></span> /db/databases/orcl/redo-03-a/redo-t01-g03-m2.log
</span><span class="code-line line-number" line="7">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">24</span> -<span class="token operator">></span> /db/databases/orcl/redo-02-a/redo-t01-g04-m1.log
</span><span class="code-line line-number" line="8">lrwx------    <span class="token number">1</span> oracle   dba            <span class="token number">64</span> Dec <span class="token number">30</span> <span class="token number">10</span>:55 <span class="token number">25</span> -<span class="token operator">></span> /db/databases/orcl/redo-04-a/redo-t01-g04-m2.log
</span></code><div onclick="copied(this)" data-code="lrwx------    1 oracle   dba            64 Dec 30 10:55 18 -> /db/databases/orcl/redo-01-a/redo-t01-g01-m1.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 19 -> /db/databases/orcl/redo-03-a/redo-t01-g01-m2.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 20 -> /db/databases/orcl/redo-02-a/redo-t01-g02-m1.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 21 -> /db/databases/orcl/redo-04-a/redo-t01-g02-m2.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 22 -> /db/databases/orcl/redo-01-a/redo-t01-g03-m1.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 23 -> /db/databases/orcl/redo-03-a/redo-t01-g03-m2.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 24 -> /db/databases/orcl/redo-02-a/redo-t01-g04-m1.log
lrwx------    1 oracle   dba            64 Dec 30 10:55 25 -> /db/databases/orcl/redo-04-a/redo-t01-g04-m2.log
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>现在能看到我机器当前日志文件的句柄分别是20和21。</p>
<p>现在我们得到如下结果</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line line-number" line="1"><span class="token number">11</span>:13:55.603245 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>J!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4363264</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="2"><span class="token number">11</span>:13:55.603569 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>J!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4363264</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="3"><span class="token number">11</span>:13:55.606888 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>M!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4364800</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="4"><span class="token number">11</span>:13:55.607172 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>M!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4364800</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="5"><span class="token number">11</span>:13:55.607934 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>P!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4366336</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="6"><span class="token number">11</span>:13:55.608199 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>P!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4366336</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="7"><span class="token number">11</span>:13:55.610260 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>S!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4367872</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="8"><span class="token number">11</span>:13:55.610530 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>S!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4367872</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="9"><span class="token number">11</span>:14:00.602446 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>V!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4369408</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="10"><span class="token number">11</span>:14:00.602750 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>V!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4369408</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="11"><span class="token number">11</span>:14:00.606386 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>Y!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4370944</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="12"><span class="token number">11</span>:14:00.606676 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>Y!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4370944</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="13"><span class="token number">11</span>:14:00.607900 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\\">\\</span>"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4372480</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="14"><span class="token number">11</span>:14:00.608161 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\\">\\</span>"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4372480</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="15"><span class="token number">11</span>:14:00.608816 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>^!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4373504</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="16"><span class="token number">11</span>:14:00.609071 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>^!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4373504</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="17"><span class="token number">11</span>:14:00.611142 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span><span class="token variable"><span class="token variable">`</span><span class="token operator">!</span><span class="token string">"..., 1536, 4374528) = 1536
</span></span></span></span><span class="code-line line-number" line="18"><span class="token string"><span class="token variable"><span class="token string">11:14:00.611454 pwrite(21, "</span><span class="token punctuation">\</span><span class="token number">1</span><span class="token punctuation">\</span>"<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span><span class="token variable">`</span></span>!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4374528</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="19"><span class="token number">11</span>:14:05.602804 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>c!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4376064</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="20"><span class="token number">11</span>:14:05.603119 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>c!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4376064</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="21"><span class="token number">11</span>:14:05.607731 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>e!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4377088</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="22"><span class="token number">11</span>:14:05.608020 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>e!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4377088</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="23"><span class="token number">11</span>:14:05.608690 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>g!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4378112</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="24"><span class="token number">11</span>:14:05.608962 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>g!"</span><span class="token punctuation">..</span>., <span class="token number">1024</span>, <span class="token number">4378112</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="25"><span class="token number">11</span>:14:05.611022 pwrite<span class="token punctuation">(</span><span class="token number">20</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>i!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4379136</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span><span class="code-line line-number" line="26"><span class="token number">11</span>:14:05.611283 pwrite<span class="token punctuation">(</span><span class="token number">21</span>, <span class="token string">"<span class="token entity" title="\1">\1</span><span class="token entity" title="\&#x22;">\"</span><span class="token entity" title="\0">\0</span><span class="token entity" title="\0">\0</span>i!"</span><span class="token punctuation">..</span>., <span class="token number">1536</span>, <span class="token number">4379136</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1536</span>
</span></code><div onclick="copied(this)" data-code="11:13:55.603245 pwrite(20, &#x22;\1\&#x22;\0\0J!&#x22;..., 1536, 4363264) = 1536
11:13:55.603569 pwrite(21, &#x22;\1\&#x22;\0\0J!&#x22;..., 1536, 4363264) = 1536
11:13:55.606888 pwrite(20, &#x22;\1\&#x22;\0\0M!&#x22;..., 1536, 4364800) = 1536
11:13:55.607172 pwrite(21, &#x22;\1\&#x22;\0\0M!&#x22;..., 1536, 4364800) = 1536
11:13:55.607934 pwrite(20, &#x22;\1\&#x22;\0\0P!&#x22;..., 1536, 4366336) = 1536
11:13:55.608199 pwrite(21, &#x22;\1\&#x22;\0\0P!&#x22;..., 1536, 4366336) = 1536
11:13:55.610260 pwrite(20, &#x22;\1\&#x22;\0\0S!&#x22;..., 1536, 4367872) = 1536
11:13:55.610530 pwrite(21, &#x22;\1\&#x22;\0\0S!&#x22;..., 1536, 4367872) = 1536
11:14:00.602446 pwrite(20, &#x22;\1\&#x22;\0\0V!&#x22;..., 1536, 4369408) = 1536
11:14:00.602750 pwrite(21, &#x22;\1\&#x22;\0\0V!&#x22;..., 1536, 4369408) = 1536
11:14:00.606386 pwrite(20, &#x22;\1\&#x22;\0\0Y!&#x22;..., 1536, 4370944) = 1536
11:14:00.606676 pwrite(21, &#x22;\1\&#x22;\0\0Y!&#x22;..., 1536, 4370944) = 1536
11:14:00.607900 pwrite(20, &#x22;\1\&#x22;\0\0\\&#x22;..., 1024, 4372480) = 1024
11:14:00.608161 pwrite(21, &#x22;\1\&#x22;\0\0\\&#x22;..., 1024, 4372480) = 1024
11:14:00.608816 pwrite(20, &#x22;\1\&#x22;\0\0^!&#x22;..., 1024, 4373504) = 1024
11:14:00.609071 pwrite(21, &#x22;\1\&#x22;\0\0^!&#x22;..., 1024, 4373504) = 1024
11:14:00.611142 pwrite(20, &#x22;\1\&#x22;\0\0&#x60;!&#x22;..., 1536, 4374528) = 1536
11:14:00.611454 pwrite(21, &#x22;\1\&#x22;\0\0&#x60;!&#x22;..., 1536, 4374528) = 1536
11:14:05.602804 pwrite(20, &#x22;\1\&#x22;\0\0c!&#x22;..., 1024, 4376064) = 1024
11:14:05.603119 pwrite(21, &#x22;\1\&#x22;\0\0c!&#x22;..., 1024, 4376064) = 1024
11:14:05.607731 pwrite(20, &#x22;\1\&#x22;\0\0e!&#x22;..., 1024, 4377088) = 1024
11:14:05.608020 pwrite(21, &#x22;\1\&#x22;\0\0e!&#x22;..., 1024, 4377088) = 1024
11:14:05.608690 pwrite(20, &#x22;\1\&#x22;\0\0g!&#x22;..., 1024, 4378112) = 1024
11:14:05.608962 pwrite(21, &#x22;\1\&#x22;\0\0g!&#x22;..., 1024, 4378112) = 1024
11:14:05.611022 pwrite(20, &#x22;\1\&#x22;\0\0i!&#x22;..., 1536, 4379136) = 1536
11:14:05.611283 pwrite(21, &#x22;\1\&#x22;\0\0i!&#x22;..., 1536, 4379136) = 1536
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<style>markdown-style pre .copied {
  display: flex;
  position: absolute;
  cursor: pointer;
  color: #a5afbb;
  top: 6px;
  right: 6px;
  border-radius: 5px;
  background: #82828226;
  padding: 6px;
  font-size: 12px;
  transition: all .3s;
}
markdown-style pre .copied:not(.active) {
  visibility: hidden;
}
markdown-style pre:hover .copied {
  visibility: visible;
}
markdown-style pre:hover .copied:hover {
  background: #4caf50;
  color: #fff;
}
markdown-style pre:hover .copied:active,
markdown-style pre .copied.active {
  background: #2e9b33;
  color: #fff;
}
markdown-style pre .copied .octicon-copy {
  display: block;
}
markdown-style pre .copied .octicon-check {
  display: none;
}
markdown-style pre .active .octicon-copy {
  display: none;
}
markdown-style pre .active .octicon-check {
  display: block;
}</style><script>/*! @uiw/copy-to-clipboard v1.0.12 | MIT (c) 2021 Kenny Wang | https://github.com/uiwjs/copy-to-clipboard.git */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).copyTextToClipboard=t()}(this,(function(){"use strict";return function(e,t){const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style={position:"absolute",left:"-9999px"},document.body.appendChild(o);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select();let c=!1;try{c=!!document.execCommand("copy")}catch(e){c=!1}document.body.removeChild(o),n&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t&&t(c)}}));

function copied(target, str) {
  target.classList.add('active');
  copyTextToClipboard(target.dataset.code, function() {
    setTimeout(() => {
      target.classList.remove('active');
    }, 2000);
  });
}</script></markdown-style>

</div>
<div class="footer ">
  <!-- <a target="_blank" href="">添加命令</a> | -->
  <a href="../hot.html">命令列表</a> |
  <!-- <a href="" target="_blank">打赏捐赠</a> | -->
  <a href="https://github.com/piwind/linux-command" target="_blank">Github</a> |
  <a href="https://forum.piwind.com/" target="_blank">Piwind 社区</a>
  <br />
  收藏本站请使用 Ctrl+D 或者 Command+d
  <br /> 共搜集到
  <span id="commands_info">
    611
  </span> 个Linux命令，Version: 2025-06-08
</div>
<script type="text/javascript" src="../js/dt.js?v=1750599371405"></script>
<script type="text/javascript" src="../js/index.js?v=1750599371405"></script>
</body>
</html>